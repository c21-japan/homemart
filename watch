#!/bin/bash
# ファイル変更を監視して自動デプロイ
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

echo -e "${GREEN}👀 ファイル監視＆自動デプロイ開始${NC}"
echo "================================"
echo "ファイルを保存すると自動でデプロイします"
echo "停止: Ctrl+C"

while true; do
    # ファイル変更を検知
    git status --short | grep -q "." && {
        echo -e "${YELLOW}📝 変更検出 → 自動デプロイ${NC}"
        git add .
        git commit -m "自動更新: $(date '+%Y-%m-%d %H:%M')"
        git push
        echo -e "${GREEN}✅ デプロイ完了${NC}"
    }
    sleep 5
done
